(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))f(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const b of l.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&f(b)}).observe(document,{childList:!0,subtree:!0});function r(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function f(o){if(o.ep)return;o.ep=!0;const l=r(o);fetch(o.href,l)}})();var ee={};(function a(n,r,f,o){var l=!!(n.Worker&&n.Blob&&n.Promise&&n.OffscreenCanvas&&n.OffscreenCanvasRenderingContext2D&&n.HTMLCanvasElement&&n.HTMLCanvasElement.prototype.transferControlToOffscreen&&n.URL&&n.URL.createObjectURL),b=typeof Path2D=="function"&&typeof DOMMatrix=="function",I=(function(){if(!n.OffscreenCanvas)return!1;try{var t=new OffscreenCanvas(1,1),e=t.getContext("2d");e.fillRect(0,0,1,1);var i=t.transferToImageBitmap();e.createPattern(i,"no-repeat")}catch{return!1}return!0})();function O(){}function z(t){var e=r.exports.Promise,i=e!==void 0?e:n.Promise;return typeof i=="function"?new i(t):(t(O,O),null)}var U=(function(t,e){return{transform:function(i){if(t)return i;if(e.has(i))return e.get(i);var c=new OffscreenCanvas(i.width,i.height),d=c.getContext("2d");return d.drawImage(i,0,0),e.set(i,c),c},clear:function(){e.clear()}}})(I,new Map),H=(function(){var t=Math.floor(16.666666666666668),e,i,c={},d=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(e=function(u){var h=Math.random();return c[h]=requestAnimationFrame(function s(m){d===m||d+t-1<m?(d=m,delete c[h],u()):c[h]=requestAnimationFrame(s)}),h},i=function(u){c[u]&&cancelAnimationFrame(c[u])}):(e=function(u){return setTimeout(u,t)},i=function(u){return clearTimeout(u)}),{frame:e,cancel:i}})(),Te=(function(){var t,e,i={};function c(d){function u(h,s){d.postMessage({options:h||{},callback:s})}d.init=function(s){var m=s.transferControlToOffscreen();d.postMessage({canvas:m},[m])},d.fire=function(s,m,v){if(e)return u(s,null),e;var y=Math.random().toString(36).slice(2);return e=z(function(p){function w(C){C.data.callback===y&&(delete i[y],d.removeEventListener("message",w),e=null,U.clear(),v(),p())}d.addEventListener("message",w),u(s,y),i[y]=w.bind(null,{data:{callback:y}})}),e},d.reset=function(){d.postMessage({reset:!0});for(var s in i)i[s](),delete i[s]}}return function(){if(t)return t;if(!f&&l){var d=["var CONFETTI, SIZE = {}, module = {};","("+a.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{t=new Worker(URL.createObjectURL(new Blob([d])))}catch(u){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("üéä Could not load worker",u),null}c(t)}return t}})(),Be={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function Se(t,e){return e?e(t):t}function Pe(t){return t!=null}function M(t,e,i){return Se(t&&Pe(t[e])?t[e]:Be[e],i)}function Oe(t){return t<0?0:Math.floor(t)}function ke(t,e){return Math.floor(Math.random()*(e-t))+t}function V(t){return parseInt(t,16)}function Ae(t){return t.map(Fe)}function Fe(t){var e=String(t).replace(/[^0-9a-f]/gi,"");return e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),{r:V(e.substring(0,2)),g:V(e.substring(2,4)),b:V(e.substring(4,6))}}function Ne(t){var e=M(t,"origin",Object);return e.x=M(e,"x",Number),e.y=M(e,"y",Number),e}function De(t){t.width=document.documentElement.clientWidth,t.height=document.documentElement.clientHeight}function Re(t){var e=t.getBoundingClientRect();t.width=e.width,t.height=e.height}function $e(t){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=t,e}function We(t,e,i,c,d,u,h,s,m){t.save(),t.translate(e,i),t.rotate(u),t.scale(c,d),t.arc(0,0,1,h,s,m),t.restore()}function je(t){var e=t.angle*(Math.PI/180),i=t.spread*(Math.PI/180);return{x:t.x,y:t.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:t.startVelocity*.5+Math.random()*t.startVelocity,angle2D:-e+(.5*i-Math.random()*i),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:t.color,shape:t.shape,tick:0,totalTicks:t.ticks,decay:t.decay,drift:t.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:t.gravity*3,ovalScalar:.6,scalar:t.scalar,flat:t.flat}}function qe(t,e){e.x+=Math.cos(e.angle2D)*e.velocity+e.drift,e.y+=Math.sin(e.angle2D)*e.velocity+e.gravity,e.velocity*=e.decay,e.flat?(e.wobble=0,e.wobbleX=e.x+10*e.scalar,e.wobbleY=e.y+10*e.scalar,e.tiltSin=0,e.tiltCos=0,e.random=1):(e.wobble+=e.wobbleSpeed,e.wobbleX=e.x+10*e.scalar*Math.cos(e.wobble),e.wobbleY=e.y+10*e.scalar*Math.sin(e.wobble),e.tiltAngle+=.1,e.tiltSin=Math.sin(e.tiltAngle),e.tiltCos=Math.cos(e.tiltAngle),e.random=Math.random()+2);var i=e.tick++/e.totalTicks,c=e.x+e.random*e.tiltCos,d=e.y+e.random*e.tiltSin,u=e.wobbleX+e.random*e.tiltCos,h=e.wobbleY+e.random*e.tiltSin;if(t.fillStyle="rgba("+e.color.r+", "+e.color.g+", "+e.color.b+", "+(1-i)+")",t.beginPath(),b&&e.shape.type==="path"&&typeof e.shape.path=="string"&&Array.isArray(e.shape.matrix))t.fill(Ue(e.shape.path,e.shape.matrix,e.x,e.y,Math.abs(u-c)*.1,Math.abs(h-d)*.1,Math.PI/10*e.wobble));else if(e.shape.type==="bitmap"){var s=Math.PI/10*e.wobble,m=Math.abs(u-c)*.1,v=Math.abs(h-d)*.1,y=e.shape.bitmap.width*e.scalar,p=e.shape.bitmap.height*e.scalar,w=new DOMMatrix([Math.cos(s)*m,Math.sin(s)*m,-Math.sin(s)*v,Math.cos(s)*v,e.x,e.y]);w.multiplySelf(new DOMMatrix(e.shape.matrix));var C=t.createPattern(U.transform(e.shape.bitmap),"no-repeat");C.setTransform(w),t.globalAlpha=1-i,t.fillStyle=C,t.fillRect(e.x-y/2,e.y-p/2,y,p),t.globalAlpha=1}else if(e.shape==="circle")t.ellipse?t.ellipse(e.x,e.y,Math.abs(u-c)*e.ovalScalar,Math.abs(h-d)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI):We(t,e.x,e.y,Math.abs(u-c)*e.ovalScalar,Math.abs(h-d)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI);else if(e.shape==="star")for(var g=Math.PI/2*3,x=4*e.scalar,L=8*e.scalar,T=e.x,S=e.y,k=5,B=Math.PI/k;k--;)T=e.x+Math.cos(g)*L,S=e.y+Math.sin(g)*L,t.lineTo(T,S),g+=B,T=e.x+Math.cos(g)*x,S=e.y+Math.sin(g)*x,t.lineTo(T,S),g+=B;else t.moveTo(Math.floor(e.x),Math.floor(e.y)),t.lineTo(Math.floor(e.wobbleX),Math.floor(d)),t.lineTo(Math.floor(u),Math.floor(h)),t.lineTo(Math.floor(c),Math.floor(e.wobbleY));return t.closePath(),t.fill(),e.tick<e.totalTicks}function ze(t,e,i,c,d){var u=e.slice(),h=t.getContext("2d"),s,m,v=z(function(y){function p(){s=m=null,h.clearRect(0,0,c.width,c.height),U.clear(),d(),y()}function w(){f&&!(c.width===o.width&&c.height===o.height)&&(c.width=t.width=o.width,c.height=t.height=o.height),!c.width&&!c.height&&(i(t),c.width=t.width,c.height=t.height),h.clearRect(0,0,c.width,c.height),u=u.filter(function(C){return qe(h,C)}),u.length?s=H.frame(w):p()}s=H.frame(w),m=p});return{addFettis:function(y){return u=u.concat(y),v},canvas:t,promise:v,reset:function(){s&&H.cancel(s),m&&m()}}}function ae(t,e){var i=!t,c=!!M(e||{},"resize"),d=!1,u=M(e,"disableForReducedMotion",Boolean),h=l&&!!M(e||{},"useWorker"),s=h?Te():null,m=i?De:Re,v=t&&s?!!t.__confetti_initialized:!1,y=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,p;function w(g,x,L){for(var T=M(g,"particleCount",Oe),S=M(g,"angle",Number),k=M(g,"spread",Number),B=M(g,"startVelocity",Number),Ye=M(g,"decay",Number),_e=M(g,"gravity",Number),Xe=M(g,"drift",Number),oe=M(g,"colors",Ae),Ze=M(g,"ticks",Number),ie=M(g,"shapes"),Je=M(g,"scalar"),Ge=!!M(g,"flat"),se=Ne(g),ce=T,_=[],Qe=t.width*se.x,Ke=t.height*se.y;ce--;)_.push(je({x:Qe,y:Ke,angle:S,spread:k,startVelocity:B,color:oe[ce%oe.length],shape:ie[ke(0,ie.length)],ticks:Ze,decay:Ye,gravity:_e,drift:Xe,scalar:Je,flat:Ge}));return p?p.addFettis(_):(p=ze(t,_,m,x,L),p.promise)}function C(g){var x=u||M(g,"disableForReducedMotion",Boolean),L=M(g,"zIndex",Number);if(x&&y)return z(function(B){B()});i&&p?t=p.canvas:i&&!t&&(t=$e(L),document.body.appendChild(t)),c&&!v&&m(t);var T={width:t.width,height:t.height};s&&!v&&s.init(t),v=!0,s&&(t.__confetti_initialized=!0);function S(){if(s){var B={getBoundingClientRect:function(){if(!i)return t.getBoundingClientRect()}};m(B),s.postMessage({resize:{width:B.width,height:B.height}});return}T.width=T.height=null}function k(){p=null,c&&(d=!1,n.removeEventListener("resize",S)),i&&t&&(document.body.contains(t)&&document.body.removeChild(t),t=null,v=!1)}return c&&!d&&(d=!0,n.addEventListener("resize",S,!1)),s?s.fire(g,T,k):w(g,T,k)}return C.reset=function(){s&&s.reset(),p&&p.reset()},C}var Y;function re(){return Y||(Y=ae(null,{useWorker:!0,resize:!0})),Y}function Ue(t,e,i,c,d,u,h){var s=new Path2D(t),m=new Path2D;m.addPath(s,new DOMMatrix(e));var v=new Path2D;return v.addPath(m,new DOMMatrix([Math.cos(h)*d,Math.sin(h)*d,-Math.sin(h)*u,Math.cos(h)*u,i,c])),v}function He(t){if(!b)throw new Error("path confetti are not supported in this browser");var e,i;typeof t=="string"?e=t:(e=t.path,i=t.matrix);var c=new Path2D(e),d=document.createElement("canvas"),u=d.getContext("2d");if(!i){for(var h=1e3,s=h,m=h,v=0,y=0,p,w,C=0;C<h;C+=2)for(var g=0;g<h;g+=2)u.isPointInPath(c,C,g,"nonzero")&&(s=Math.min(s,C),m=Math.min(m,g),v=Math.max(v,C),y=Math.max(y,g));p=v-s,w=y-m;var x=10,L=Math.min(x/p,x/w);i=[L,0,0,L,-Math.round(p/2+s)*L,-Math.round(w/2+m)*L]}return{type:"path",path:e,matrix:i}}function Ve(t){var e,i=1,c="#000000",d='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof t=="string"?e=t:(e=t.text,i="scalar"in t?t.scalar:i,d="fontFamily"in t?t.fontFamily:d,c="color"in t?t.color:c);var u=10*i,h=""+u+"px "+d,s=new OffscreenCanvas(u,u),m=s.getContext("2d");m.font=h;var v=m.measureText(e),y=Math.ceil(v.actualBoundingBoxRight+v.actualBoundingBoxLeft),p=Math.ceil(v.actualBoundingBoxAscent+v.actualBoundingBoxDescent),w=2,C=v.actualBoundingBoxLeft+w,g=v.actualBoundingBoxAscent+w;y+=w+w,p+=w+w,s=new OffscreenCanvas(y,p),m=s.getContext("2d"),m.font=h,m.fillStyle=c,m.fillText(e,C,g);var x=1/i;return{type:"bitmap",bitmap:s.transferToImageBitmap(),matrix:[x,0,0,x,-y*x/2,-p*x/2]}}r.exports=function(){return re().apply(this,arguments)},r.exports.reset=function(){re().reset()},r.exports.create=ae,r.exports.shapeFromPath=He,r.exports.shapeFromText=Ve})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),ee,!1);const F=ee.exports;ee.exports.create;const le="http://localhost:3001/api",Ce={async getWishes(){try{const a=await fetch(`${le}/wishes`);if(!a.ok)throw new Error("Failed to fetch wishes");return await a.json()}catch(a){return console.error(a),[]}},async addWish(a){try{const n=await fetch(`${le}/wishes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:a})});if(!n.ok)throw new Error("Failed to add wish");return await n.json()}catch(n){return console.error(n),null}}},J={balloonColors:["#3b82f6","#1e40af","#60a5fa","#93c5fd","#bfdbfe"],popSound:"https://assets.mixkit.co/active_storage/sfx/2571/2571-preview.mp3"},et=document.getElementById("unlock-btn"),tt=document.getElementById("intro"),te=document.getElementById("celebration"),de=document.querySelector(".main-card"),ne=document.querySelectorAll(".candle"),nt=document.getElementById("hug-btn"),at=document.getElementById("hi5-btn"),rt=document.querySelectorAll(".timeline-item"),X=document.getElementById("gift-box"),ot=document.getElementById("gift-content"),P=document.getElementById("voice-note-audio"),D=document.getElementById("play-voice-btn"),ue=document.getElementById("audio-bar"),N=document.getElementById("music-toggle"),G=document.getElementById("bg-music"),fe=document.getElementById("score-value"),q=document.getElementById("wish-input"),he=document.getElementById("add-wish-btn"),Q=document.getElementById("wish-board"),W=document.getElementById("wish-loader"),it=document.querySelectorAll(".polaroid"),K=document.getElementById("jar-of-joy");document.getElementById("jar-labels-container");const E=document.getElementById("scratch-canvas");document.querySelector(".scratch-container");const st=new Date("2025-06-30"),me=document.querySelector(".days-number"),ge=document.getElementById("current-day-tag");let Z,$,ve,Ee=!1,pe=0;const ct=1e3;let ye=0,j=!1,R=!1;const we=["You're a legend! üèÜ","Best gaming partner ever! üî•","Your laugh is contagious! üòÇ","Always there when I need you! ü§ù","One in a billion! ‚ú®","The ultimate bestie! üíñ","Infinite IQ plays! üß†","Pure sunshine! ‚òÄÔ∏è","Coolest person I know! üòé","Always carrying the vibes! üëë"];function lt(){et.addEventListener("click",()=>{It(),pt()}),nt.addEventListener("click",()=>{Me("ü§ó","animate-hug"),A("hug")}),at.addEventListener("click",()=>{Me("‚úã","animate-hi5"),A("hi5")}),X.addEventListener("click",()=>{X.classList.contains("open")||(X.classList.add("open"),setTimeout(()=>{ot.classList.remove("hidden"),A("gift")},600))}),ne.forEach(a=>{a.addEventListener("click",()=>{Le(a)})}),Lt(),Tt(),bt(),vt(),gt(),dt()}function dt(){N&&G&&N.addEventListener("click",()=>{Ie()}),he&&q&&(he.addEventListener("click",()=>{be()}),q.addEventListener("keypress",a=>{a.key==="Enter"&&be()})),it.forEach(a=>{a.addEventListener("click",()=>{a.classList.toggle("flipped")})}),mt(),K&&K.addEventListener("click",()=>{ut()}),E&&ft()}function ut(){const a=we[Math.floor(Math.random()*we.length)],n=document.createElement("div");n.className="joy-label",n.textContent=a;const r=60+(Math.random()*40-20),f=80;n.style.left=`${r}px`,n.style.top=`${f}px`,K.appendChild(n);const o=Math.random()*200-100,l=-150-Math.random()*100,b=Math.random()*40-20;n.animate([{transform:"translate(0, 0) scale(0.5) rotate(0deg)",opacity:0},{transform:`translate(${o}px, ${l}px) scale(1) rotate(${b}deg)`,opacity:1,offset:.2},{transform:`translate(${o}px, ${l*1.5}px) scale(1.1) rotate(${b*1.5}deg)`,opacity:0}],{duration:2e3,easing:"ease-out",fill:"forwards"}).onfinish=()=>n.remove()}function ft(){const a=E.getContext("2d"),n=E.width,r=E.height;a.fillStyle="#C0C0C0",a.fillRect(0,0,n,r);for(let o=0;o<100;o++)a.fillStyle=`rgba(255, 255, 255, ${Math.random()*.1})`,a.beginPath(),a.arc(Math.random()*n,Math.random()*r,Math.random()*5,0,Math.PI*2),a.fill();const f=o=>{if(!R)return;const l=E.getBoundingClientRect(),b=(o.clientX||o.touches[0].clientX)-l.left,I=(o.clientY||o.touches[0].clientY)-l.top;a.globalCompositeOperation="destination-out",a.beginPath(),a.arc(b,I,20,0,Math.PI*2),a.fill(),ht()};E.addEventListener("mousedown",()=>R=!0),E.addEventListener("touchstart",o=>{o.preventDefault(),R=!0},{passive:!1}),window.addEventListener("mouseup",()=>R=!1),window.addEventListener("touchend",()=>R=!1),E.addEventListener("mousemove",f),E.addEventListener("touchmove",o=>{o.preventDefault(),f(o)},{passive:!1})}function ht(){const r=E.getContext("2d").getImageData(0,0,E.width,E.height).data;let f=0;for(let l=3;l<r.length;l+=4)r[l]===0&&f++;f/(r.length/4)*100>70&&(E.style.transition="opacity 1s ease",E.style.opacity="0",setTimeout(()=>{E.remove(),A("gift")},1e3))}async function be(){const a=q.value.trim();a&&(await Ce.addWish(a)?xe(a):console.error("Error saving wish to MySQL"),q.value="",A("wish"))}async function mt(){W&&W.classList.remove("hidden");const a=await Ce.getWishes();W&&W.classList.add("hidden"),a&&(Q.innerHTML="",a.forEach(n=>xe(n.content)))}function xe(a){if(Array.from(Q.querySelectorAll(".sticky-note")).map(o=>o.textContent).includes(a))return;const r=document.createElement("div");r.className="sticky-note",r.textContent=a;const f=(Math.random()*6-3).toFixed(1);r.style.setProperty("--r",`${f}deg`),Q.appendChild(r)}function Ie(){j?(G.pause(),N.classList.add("muted"),N.querySelector(".icon").textContent="üîá"):(G.play().catch(a=>console.log("Audio play blocked",a)),N.classList.remove("muted"),N.querySelector(".icon").textContent="üéµ"),j=!j}function gt(){const n=Math.abs(new Date-st),r=Math.ceil(n/(1e3*60*60*24));if(me){let f=0;const l=Math.abs(Math.floor(2e3/r)),b=setInterval(()=>{f+=1,me.textContent=f,f>=r&&clearInterval(b)},l)}ge&&(ge.textContent=`Day ${r}`)}function vt(){!D||!P||(D.addEventListener("click",a=>{a.stopPropagation(),P.paused?(P.play(),D.innerHTML='<span class="icon">‚è∏Ô∏è</span>'):(P.pause(),D.innerHTML='<span class="icon">‚ñ∂Ô∏è</span>')}),P.addEventListener("timeupdate",()=>{const a=P.currentTime/P.duration*100;ue.style.width=`${a}%`}),P.addEventListener("ended",()=>{D.innerHTML='<span class="icon">‚ñ∂Ô∏è</span>',ue.style.width="0%"}))}async function pt(){try{ve=await navigator.mediaDevices.getUserMedia({audio:!0}),Z=new(window.AudioContext||window.webkitAudioContext),$=Z.createAnalyser(),Z.createMediaStreamSource(ve).connect($),$.fftSize=256,Ee=!0,yt()}catch(a){console.log("Mic access denied or not available",a)}}function yt(){if(!Ee)return;const a=$.frequencyBinCount,n=new Uint8Array(a),r=()=>{$.getByteFrequencyData(n);let f=0;for(let l=0;l<a;l++)f+=n[l];f/a>80&&Date.now()-pe>ct&&(wt(),pe=Date.now()),requestAnimationFrame(r)};r()}function wt(){const a=Array.from(ne).find(n=>!n.classList.contains("blown"));a&&Le(a)}function Le(a){a.classList.contains("blown")||(a.classList.add("blown"),xt())}function A(a){if(a==="start")F({particleCount:150,spread:70,origin:{y:.6},colors:["#00d2ff","#3a7bd5","#ffffff"]});else if(a==="all-blown"){let l=function(I,O){return Math.random()*(O-I)+I};var n=l;const f=Date.now()+5e3,o={startVelocity:30,spread:360,ticks:60,zIndex:0},b=setInterval(function(){const I=f-Date.now();if(I<=0)return clearInterval(b);const O=50*(I/5e3);F(Object.assign({},o,{particleCount:O,origin:{x:l(.1,.3),y:Math.random()-.2}})),F(Object.assign({},o,{particleCount:O,origin:{x:l(.7,.9),y:Math.random()-.2}}))},250)}else F(a==="wish"?{particleCount:50,spread:60,origin:{y:.7},colors:["#00d2ff","#ffffff","#ffeb3b"]}:{particleCount:40,scalar:1.2,spread:100,origin:{y:.8},colors:["#00d2ff","#3a7bd5"]})}function bt(){setInterval(()=>{te.classList.contains("active")&&(Ct(),Math.random()<.3&&Mt())},3e3)}function Mt(){const a=document.querySelector(".decorations"),n=document.createElement("div");n.className="floating-jasmine";const r=Math.random()*90,f=50+Math.random()*30,o=12+Math.random()*8;n.innerHTML="üåº",n.style.fontSize=`${f}px`,n.style.left=`${r}%`,n.style.width=`${f}px`,n.style.height=`${f}px`,n.style.position="fixed",n.style.bottom="-100px",n.style.zIndex="5",n.style.pointerEvents="none",n.style.animation=`floatUp ${o}s linear forwards, rotateFlower ${o}s linear infinite`,a.appendChild(n),setTimeout(()=>{n.parentNode&&n.remove()},o*1e3)}function Ct(){const a=document.querySelector(".decorations"),n=document.createElement("div");n.className="floating-balloon";const r=J.balloonColors[Math.floor(Math.random()*J.balloonColors.length)],f=Math.random()*90,o=60+Math.random()*40,l=10+Math.random()*10;n.style.left=`${f}%`,n.style.width=`${o}px`,n.style.height=`${o*1.2}px`,n.style.backgroundColor=r,n.style.boxShadow=`inset -10px -10px 20px rgba(0,0,0,0.1), 0 10px 20px -5px ${r}88`,n.style.animation=`floatUp ${l}s linear forwards`;const b=document.createElement("div");b.className="balloon-string",n.appendChild(b),n.addEventListener("pointerdown",I=>{I.preventDefault(),Et(n)}),a.appendChild(n),setTimeout(()=>{n.parentNode&&n.remove()},l*1e3)}function Et(a){a.style.transform="scale(1.5)",a.style.opacity="0",a.style.pointerEvents="none",ye++,fe&&(fe.textContent=ye);const n=new Audio(J.popSound);n.volume=.3,n.play().catch(f=>{});const r=a.getBoundingClientRect();F({particleCount:15,origin:{x:(r.left+r.width/2)/window.innerWidth,y:(r.top+r.height/2)/window.innerHeight},colors:[a.style.backgroundColor,"#ffffff"]}),setTimeout(()=>a.remove(),200)}function Me(a,n){const r=document.createElement("div");r.className=`overlay-effect ${n}`,r.innerHTML=a,document.body.appendChild(r),setTimeout(()=>{r.remove()},1500)}function xt(){if(Array.from(ne).every(n=>n.classList.contains("blown"))){const n=document.querySelector(".wish-text");n.innerHTML="‚ú® Make a wish! Your friendship is the best gift ever! ‚ú®",n.style.color="var(--primary)",A("all-blown")}}function It(){tt.classList.remove("active"),te.classList.add("active"),A("start"),setTimeout(()=>{j||Ie()},1e3)}function Lt(){const a=(n,r)=>{if(!te.classList.contains("active"))return;const{innerWidth:f,innerHeight:o}=window,l=(n/f-.5)*20,b=(r/o-.5)*-20;de&&(de.style.transform=`rotateX(${b}deg) rotateY(${l}deg)`)};document.addEventListener("mousemove",n=>a(n.clientX,n.clientY)),document.addEventListener("touchmove",n=>{const r=n.touches[0];a(r.clientX,r.clientY)},{passive:!0})}function Tt(){const a={threshold:.2},n=new IntersectionObserver(r=>{r.forEach(f=>{f.isIntersecting&&f.target.classList.add("visible")})},a);rt.forEach(r=>n.observe(r))}lt();
